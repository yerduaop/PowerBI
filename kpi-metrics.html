<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPI & Métriques - Guide Power BI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="page-header">
        <div class="header-content">
            <h1 class="page-title">🎯 KPI & Métriques</h1>
            <p class="page-subtitle">Créez des indicateurs de performance impactants</p>
        </div>
    </header>
    
    <nav class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="index.html">🏠 Accueil</a>
            <span>›</span>
            <span>KPI & Métriques</span>
        </div>
    </nav>
    
    <div class="container">
        <div class="level-badge level-beginner">
            🟢 Accessible aux débutants • ⏱️ 12 min de lecture
        </div>
        
        <div class="quick-actions">
            <a href="#card" class="action-btn btn-primary">📇 Card</a>
            <a href="#kpi" class="action-btn btn-primary">🎯 KPI Visual</a>
            <a href="#gauge" class="action-btn btn-secondary">📊 Gauge</a>
            <a href="#dax" class="action-btn btn-secondary">💻 Code DAX</a>
        </div>
        
        <!-- INTRODUCTION -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">📚</span>
                <h2 class="section-title">Introduction aux KPI</h2>
                <span class="section-level level-beginner">🟢 Débutant</span>
            </div>
            
            <div class="info-box info-box-definition">
                <div class="info-box-title">💡 Qu'est-ce qu'un KPI ?</div>
                <p><strong>KPI (Key Performance Indicator)</strong> = Indicateur Clé de Performance. C'est une métrique qui mesure le succès d'une activité par rapport à un objectif.</p>
                <p style="margin-top: 1rem;"><strong>En un mot :</strong> Les chiffres les plus importants de votre business.</p>
            </div>
            
            <div class="info-box info-box-tip">
                <div class="info-box-title">🎯 Anatomie d'un Bon KPI</div>
                <p>Un KPI efficace comprend :</p>
                <ul style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li>✅ <strong>Valeur actuelle</strong> : Le chiffre principal</li>
                    <li>✅ <strong>Contexte</strong> : Comparaison (vs période, vs objectif)</li>
                    <li>✅ <strong>Tendance</strong> : Est-ce que ça monte ou descend ?</li>
                    <li>✅ <strong>Statut visuel</strong> : Couleur (vert/rouge) pour impact immédiat</li>
                </ul>
            </div>
        </section>
        
        <!-- SECTION CARD -->
        <section class="section" id="card">
            <div class="section-header">
                <span class="section-icon">📇</span>
                <h2 class="section-title">Card (Carte Simple)</h2>
                <span class="section-level level-beginner">🟢 Débutant</span>
            </div>
            
            <div class="info-box info-box-definition">
                <div class="info-box-title">💡 Qu'est-ce qu'une Card ?</div>
                <p>Une <strong>Card</strong> affiche une seule valeur numérique en grande taille. C'est le visuel le plus simple pour mettre en avant UNE métrique importante.</p>
                <p style="margin-top: 1rem;"><strong>En un mot :</strong> Pour afficher LE chiffre le plus important.</p>
            </div>
            
            <div class="info-box info-box-when">
                <div class="info-box-title">✅ Quand utiliser une Card ?</div>
                <ul style="margin-left: 1.5rem;">
                    <li><strong>Métrique phare</strong> : Le chiffre #1 du dashboard</li>
                    <li><strong>Zone supérieure</strong> : 3-5 cards en haut pour vue d'ensemble</li>
                    <li><strong>Avec contexte</strong> : Toujours ajouter comparaison ou tendance</li>
                </ul>
            </div>
            
            <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem;">Options Principales</h3>
            
            <div class="options-grid">
                <div class="option-card">
                    <div class="option-name">Category Label</div>
                    <div class="option-description">Titre de la métrique</div>
                    <div class="option-relevance">→ ⭐⭐⭐ OBLIGATOIRE : Sans titre, le chiffre ne veut rien dire</div>
                    <span class="option-level level-beginner">🟢 Débutant</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Data Label Format</div>
                    <div class="option-description">Format d'affichage</div>
                    <div class="option-relevance">→ € pour argent, % pour taux, K/M pour grands nombres</div>
                    <span class="option-level level-beginner">🟢 Débutant</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Conditional Formatting</div>
                    <div class="option-description">Couleur selon valeur/objectif</div>
                    <div class="option-relevance">→ ⭐⭐ IMPORTANT : Rouge si sous objectif, vert si atteint</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Text Size</div>
                    <div class="option-description">Taille de police</div>
                    <div class="option-relevance">→ Grande et visible, c'est fait pour être vu rapidement</div>
                    <span class="option-level level-beginner">🟢 Débutant</span>
                </div>
            </div>
            
            <div class="info-box info-box-warning" style="margin-top: 2rem;">
                <div class="info-box-title">⚠️ Erreur Courante</div>
                <p><strong>❌ Ne JAMAIS afficher une valeur seule sans contexte</strong></p>
                <p style="margin-top: 0.5rem;">Mauvais : "25 000 €"</p>
                <p style="color: var(--success); margin-top: 0.5rem;">✅ Bon : "25 000 € (↑15% vs mois dernier)"</p>
            </div>
        </section>
        
        <!-- SECTION KPI VISUAL -->
        <section class="section" id="kpi">
            <div class="section-header">
                <span class="section-icon">🎯</span>
                <h2 class="section-title">KPI Visual (Le Plus Complet)</h2>
                <span class="section-level level-intermediate">🟡 Intermédiaire</span>
            </div>
            
            <div class="info-box info-box-definition">
                <div class="info-box-title">💡 Qu'est-ce qu'un KPI Visual ?</div>
                <p>Le <strong>KPI Visual</strong> est le visuel le plus riche pour afficher un indicateur : il combine valeur actuelle, objectif, écart, ET tendance historique dans un seul visuel compact.</p>
                <p style="margin-top: 1rem;"><strong>En un mot :</strong> Card + Objectif + Tendance = KPI Visual</p>
            </div>
            
            <div class="info-box info-box-when">
                <div class="info-box-title">✅ Quand utiliser un KPI Visual ?</div>
                <ul style="margin-left: 1.5rem;">
                    <li><strong>Avec objectifs définis</strong> : Vous avez des targets à atteindre</li>
                    <li><strong>Suivi dans le temps</strong> : L'historique est pertinent</li>
                    <li><strong>Dashboards exécutifs</strong> : Vue d'ensemble rapide</li>
                    <li><strong>3-6 KPI max</strong> : Pas plus pour garder l'impact</li>
                </ul>
            </div>
            
            <h3 style="color: var(--primary); margin-top: 2rem; margin-bottom: 1rem;">Configuration Complète</h3>
            
            <div class="options-grid">
                <div class="option-card">
                    <div class="option-name">Indicator</div>
                    <div class="option-description">Valeur actuelle (métrique principale)</div>
                    <div class="option-relevance">→ ⭐ ESSENTIEL : Le chiffre à suivre</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Trend Axis</div>
                    <div class="option-description">Dimension temporelle pour historique</div>
                    <div class="option-relevance">→ ⭐ IMPORTANT : Dates pour voir évolution</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Target Goals</div>
                    <div class="option-description">Objectif à atteindre</div>
                    <div class="option-relevance">→ ⭐⭐⭐ CRITIQUE : Donne contexte de performance</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Direction</div>
                    <div class="option-description">Bon/mauvais selon hausse/baisse</div>
                    <div class="option-relevance">→ Inverser si diminution = positif (ex: taux d'erreur)</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Indicator Colors</div>
                    <div class="option-description">Couleurs selon atteinte objectif</div>
                    <div class="option-relevance">→ Convention : Vert = atteint, Rouge = non atteint</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
                
                <div class="option-card">
                    <div class="option-name">Trend Line</div>
                    <div class="option-description">Mini-graphique d'évolution</div>
                    <div class="option-relevance">→ ⭐ TRÈS UTILE : Contexte historique en un coup d'œil</div>
                    <span class="option-level level-intermediate">🟡 Intermédiaire</span>
                </div>
            </div>
            
            <div class="info-box info-box-tip" style="margin-top: 2rem;">
                <div class="info-box-title">💡 Configuration Optimale</div>
                <p><strong>Pour un KPI Visual parfait :</strong></p>
                <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
                    <li>✓ Indicator : Votre métrique principale</li>
                    <li>✓ Trend Axis : Date (mois, semaines...)</li>
                    <li>✓ Target : Objectif fixe ou calculé dynamiquement</li>
                    <li>✓ Activer Trend Line pour voir l'évolution</li>
                    <li>✓ Afficher écart en % ET en valeur absolue</li>
                </ol>
            </div>
        </section>
        
        <!-- SECTION GAUGE -->
        <section class="section" id="gauge">
            <div class="section-header">
                <span class="section-icon">📊</span>
                <h2 class="section-title">Gauge (Jauge)</h2>
                <span class="section-level level-beginner">🟢 Débutant</span>
            </div>
            
            <div class="info-box info-box-definition">
                <div class="info-box-title">💡 Qu'est-ce qu'une Gauge ?</div>
                <p>Une <strong>Gauge</strong> (jauge) affiche la progression vers un objectif avec une aiguille sur un cadran circulaire, comme un compteur de vitesse.</p>
                <p style="margin-top: 1rem;"><strong>En un mot :</strong> Pour montrer visuellement "où on en est".</p>
            </div>
            
            <div class="info-box info-box-when">
                <div class="info-box-title">✅ Quand utiliser une Gauge ?</div>
                <ul style="margin-left: 1.5rem;">
                    <li><strong>Progression claire</strong> : De 0% à 100% d'un objectif</li>
                    <li><strong>UN seul KPI très important</strong> : Prend beaucoup d'espace</li>
                    <li><strong>Impact visuel</strong> : Quand on veut "waouh" effect</li>
                </ul>
            </div>
            
            <div class="info-box info-box-warning">
                <div class="info-box-title">⚠️ Limitations</div>
                <ul style="margin-left: 1.5rem;">
                    <li>❌ <strong>Prend beaucoup d'espace</strong> → Préférer KPI Visual (plus d'infos, moins d'espace)</li>
                    <li>❌ <strong>Jauges multiples</strong> → Difficile de comparer plusieurs jauges</li>
                    <li>❌ <strong>Précision</strong> → Difficile de lire valeur exacte</li>
                </ul>
            </div>
            
            <div class="info-box info-box-tip" style="margin-top: 1.5rem;">
                <div class="info-box-title">💡 Pro Tip : Gauge vs KPI Visual</div>
                <p><strong>Question à se poser :</strong> "Ai-je vraiment besoin d'une jauge ?"</p>
                <p style="margin-top: 0.5rem;">🎯 Dans 80% des cas, un <strong>KPI Visual est meilleur</strong> car il affiche plus d'informations dans moins d'espace.</p>
                <p style="margin-top: 0.5rem;">📊 Utiliser Gauge uniquement pour LE KPI le plus critique du dashboard, pour effet visuel fort.</p>
            </div>
        </section>
        
        <!-- SECTION MULTI-ROW CARD -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">📇</span>
                <h2 class="section-title">Multi-row Card</h2>
                <span class="section-level level-beginner">🟢 Débutant</span>
            </div>
            
            <div class="info-box info-box-definition">
                <div class="info-box-title">💡 Qu'est-ce qu'une Multi-row Card ?</div>
                <p>Une <strong>Multi-row Card</strong> affiche plusieurs métriques groupées dans une seule carte, côte à côte ou empilées.</p>
                <p style="margin-top: 1rem;"><strong>En un mot :</strong> Pour grouper des métriques connexes.</p>
            </div>
            
            <div class="info-box info-box-when">
                <div class="info-box-title">✅ Quand utiliser ?</div>
                <ul style="margin-left: 1.5rem;">
                    <li><strong>Métriques liées</strong> : Ventes + Marge + Volume ensemble</li>
                    <li><strong>Comparaisons</strong> : Cette année vs année dernière</li>
                    <li><strong>Économie d'espace</strong> : Plusieurs chiffres groupés</li>
                </ul>
            </div>
        </section>
        
        <!-- SECTION DAX -->
        <section class="section" id="dax">
            <div class="section-header">
                <span class="section-icon">💻</span>
                <h2 class="section-title">Mesures DAX pour KPI</h2>
                <span class="section-level level-intermediate">🟡 Intermédiaire</span>
            </div>
            
            <p style="margin-bottom: 1.5rem;">Voici les mesures DAX essentielles pour créer vos KPI :</p>
            
            <h3 style="color: var(--primary); margin-bottom: 1rem;">1️⃣ Mesures de Base</h3>
            
            <div class="code-block">
<span class="code-comment">// Mesure simple</span>
<span class="code-keyword">Total Sales</span> = <span class="code-function">SUM</span>(<span class="code-string">Sales[Amount]</span>)

<span class="code-comment">// Comptage</span>
<span class="code-keyword">Order Count</span> = <span class="code-function">COUNTROWS</span>(<span class="code-string">Sales</span>)

<span class="code-comment">// Comptage distinct</span>
<span class="code-keyword">Customer Count</span> = <span class="code-function">DISTINCTCOUNT</span>(<span class="code-string">Sales[CustomerID]</span>)

<span class="code-comment">// Moyenne</span>
<span class="code-keyword">Average Order Value</span> = 
<span class="code-function">DIVIDE</span>(
    [<span class="code-string">Total Sales</span>],
    [<span class="code-string">Order Count</span>],
    <span class="code-string">0</span>
)
            </div>
            
            <h3 style="color: var(--primary); margin: 2rem 0 1rem;">2️⃣ Comparaisons Temporelles</h3>
            
            <div class="code-block">
<span class="code-comment">// Année précédente (Year-over-Year)</span>
<span class="code-keyword">Sales LY</span> = 
<span class="code-function">CALCULATE</span>(
    [<span class="code-string">Total Sales</span>],
    <span class="code-function">SAMEPERIODLASTYEAR</span>(Calendar[<span class="code-string">Date</span>])
)

<span class="code-comment">// Mois précédent (Month-over-Month)</span>
<span class="code-keyword">Sales PM</span> = 
<span class="code-function">CALCULATE</span>(
    [<span class="code-string">Total Sales</span>],
    <span class="code-function">DATEADD</span>(Calendar[<span class="code-string">Date</span>], <span class="code-string">-1</span>, <span class="code-string">MONTH</span>)
)

<span class="code-comment">// Croissance YoY en %</span>
<span class="code-keyword">YoY Growth %</span> = 
<span class="code-keyword">VAR</span> _Current = [<span class="code-string">Total Sales</span>]
<span class="code-keyword">VAR</span> _LastYear = [<span class="code-string">Sales LY</span>]
<span class="code-keyword">RETURN</span>
    <span class="code-function">DIVIDE</span>(
        _Current - _LastYear,
        _LastYear,
        <span class="code-string">0</span>
    )

<span class="code-comment">// Croissance MoM en %</span>
<span class="code-keyword">MoM Growth %</span> = 
<span class="code-keyword">VAR</span> _Current = [<span class="code-string">Total Sales</span>]
<span class="code-keyword">VAR</span> _PrevMonth = [<span class="code-string">Sales PM</span>]
<span class="code-keyword">RETURN</span>
    <span class="code-function">DIVIDE</span>(
        _Current - _PrevMonth,
        _PrevMonth,
        <span class="code-string">0</span>
    )
            </div>
            
            <h3 style="color: var(--primary); margin: 2rem 0 1rem;">3️⃣ Objectifs & Variance</h3>
            
            <div class="code-block">
<span class="code-comment">// Objectif (peut venir d'une table ou être fixe)</span>
<span class="code-keyword">Sales Target</span> = <span class="code-function">SUM</span>(<span class="code-string">Targets[TargetAmount]</span>)

<span class="code-comment">// Variance en valeur absolue</span>
<span class="code-keyword">Variance</span> = [<span class="code-string">Total Sales</span>] - [<span class="code-string">Sales Target</span>]

<span class="code-comment">// % d'atteinte de l'objectif</span>
<span class="code-keyword">Achievement %</span> = 
<span class="code-function">DIVIDE</span>(
    [<span class="code-string">Total Sales</span>],
    [<span class="code-string">Sales Target</span>],
    <span class="code-string">0</span>
)

<span class="code-comment">// Variance en %</span>
<span class="code-keyword">Variance %</span> = 
<span class="code-keyword">VAR</span> _Actual = [<span class="code-string">Total Sales</span>]
<span class="code-keyword">VAR</span> _Target = [<span class="code-string">Sales Target</span>]
<span class="code-keyword">RETURN</span>
    <span class="code-function">DIVIDE</span>(
        _Actual - _Target,
        _Target,
        <span class="code-string">0</span>
    )
            </div>
            
            <h3 style="color: var(--primary); margin: 2rem 0 1rem;">4️⃣ Statuts pour Conditional Formatting</h3>
            
            <div class="code-block">
<span class="code-comment">// Statut textuel (pour tooltips ou labels)</span>
<span class="code-keyword">Performance Status</span> = 
<span class="code-function">SWITCH</span>(
    <span class="code-keyword">TRUE</span>(),
    [<span class="code-string">Achievement %</span>] >= <span class="code-string">1.1</span>, <span class="code-string">"🟢 Excellent"</span>,
    [<span class="code-string">Achievement %</span>] >= <span class="code-string">1</span>, <span class="code-string">"🟢 On Target"</span>,
    [<span class="code-string">Achievement %</span>] >= <span class="code-string">0.9</span>, <span class="code-string">"🟡 At Risk"</span>,
    <span class="code-string">"🔴 Below Target"</span>
)

<span class="code-comment">// Couleur pour conditional formatting (retourne code couleur)</span>
<span class="code-keyword">Status Color</span> = 
<span class="code-function">SWITCH</span>(
    <span class="code-keyword">TRUE</span>(),
    [<span class="code-string">Achievement %</span>] >= <span class="code-string">1</span>, <span class="code-string">"#10b981"</span>,    <span class="code-comment">// Vert</span>
    [<span class="code-string">Achievement %</span>] >= <span class="code-string">0.9</span>, <span class="code-string">"#f59e0b"</span>,  <span class="code-comment">// Orange</span>
    <span class="code-string">"#ef4444"</span>                                <span class="code-comment">// Rouge</span>
)

<span class="code-comment">// Icône selon tendance</span>
<span class="code-keyword">Trend Icon</span> = 
<span class="code-function">SWITCH</span>(
    <span class="code-keyword">TRUE</span>(),
    [<span class="code-string">YoY Growth %</span>] > <span class="code-string">0.05</span>, <span class="code-string">"↑"</span>,
    [<span class="code-string">YoY Growth %</span>] < <span class="code-string">-0.05</span>, <span class="code-string">"↓"</span>,
    <span class="code-string">"→"</span>
)
            </div>
        </section>
        
        <!-- SECTION EXEMPLES -->
        <section class="section" id="exemples">
            <div class="section-header">
                <span class="section-icon">📝</span>
                <h2 class="section-title">Exemples Progressifs</h2>
            </div>
            
            <div class="examples-container">
                <div class="example example-beginner">
                    <div class="example-header">
                        <div class="example-title">🟢 Exemple 1 : Card Simple avec Croissance</div>
                        <span class="example-badge level-beginner">Débutant</span>
                    </div>
                    
                    <p><strong>Objectif :</strong> Afficher ventes du mois avec % croissance vs mois dernier</p>
                    
                    <div class="code-block">
<span class="code-comment">// 1. Mesures nécessaires</span>
<span class="code-keyword">Total Sales</span> = <span class="code-function">SUM</span>(<span class="code-string">Sales[Amount]</span>)

<span class="code-keyword">Sales PM</span> = 
<span class="code-function">CALCULATE</span>(
    [<span class="code-string">Total Sales</span>],
    <span class="code-function">DATEADD</span>(Calendar[<span class="code-string">Date</span>], <span class="code-string">-1</span>, <span class="code-string">MONTH</span>)
)

<span class="code-keyword">MoM Growth %</span> = 
<span class="code-function">DIVIDE</span>(
    [<span class="code-string">Total Sales</span>] - [<span class="code-string">Sales PM</span>],
    [<span class="code-string">Sales PM</span>],
    <span class="code-string">0</span>
)

<span class="code-comment">// 2. Mesure combinée pour affichage</span>
<span class="code-keyword">Sales with Growth</span> = 
[<span class="code-string">Total Sales</span>] & <span class="code-string">" ("</span> & 
<span class="code-function">FORMAT</span>([<span class="code-string">MoM Growth %</span>], <span class="code-string">"+0.0%;-0.0%"</span>) & 
<span class="code-string">" vs mois dernier)"</span>

<span class="code-comment">// 3. Dans Card : Utiliser [Sales with Growth]</span>
                    </div>
                    
                    <div class="info-box info-box-when">
                        <strong>✅ Résultat :</strong> "125 450 € (+12.5% vs mois dernier)"
                    </div>
                </div>
                
                <div class="example example-intermediate">
                    <div class="example-header">
                        <div class="example-title">🟡 Exemple 2 : KPI Visual Complet</div>
                        <span class="example-badge level-intermediate">Intermédiaire</span>
                    </div>
                    
                    <p><strong>Objectif :</strong> KPI Visual avec ventes, objectif, et tendance sur 12 mois</p>
                    
                    <div class="code-block">
<span class="code-comment">// Configuration KPI Visual:</span>
<span class="code-comment">// ─────────────────────────────────────</span>
<span class="code-comment">// Indicator   : [Total Sales]</span>
<span class="code-comment">// Trend Axis  : Calendar[Month]</span>
<span class="code-comment">// Target Goals: [Sales Target]</span>

<span class="code-comment">// Mesures</span>
<span class="code-keyword">Total Sales</span> = <span class="code-function">SUM</span>(<span class="code-string">Sales[Amount]</span>)

<span class="code-keyword">Sales Target</span> = 
<span class="code-comment">// Option 1: Table de targets</span>
<span class="code-function">SUM</span>(<span class="code-string">Targets[MonthlyTarget]</span>)

<span class="code-comment">// Option 2: Calcul dynamique (ex: +10% vs année dernière)</span>
<span class="code-comment">// CALCULATE([Total Sales], SAMEPERIODLASTYEAR(...)) * 1.1</span>

<span class="code-comment">// Configuration avancée:</span>
<span class="code-comment">// ─────────────────────</span>
<span class="code-comment">// Direction: Good when increasing</span>
<span class="code-comment">// Trend Line: Activé</span>
<span class="code-comment">// Colors: Vert si >= 100%, Rouge sinon</span>
<span class="code-comment">// Distance: Afficher en % ET valeur</span>
                    </div>
                </div>
                
                <div class="example example-expert">
                    <div class="example-header">
                        <div class="example-title">🔴 Exemple 3 : Dashboard KPI Complet</div>
                        <span class="example-badge level-expert">Expert</span>
                    </div>
                    
                    <p><strong>Objectif :</strong> Zone supérieure avec 5 KPI cards synchronisés avec conditional formatting</p>
                    
                    <div class="code-block">
<span class="code-comment">// STRUCTURE DASHBOARD
// ═══════════════════════════════════════════
// Zone Supérieure (Hero): 5 KPI Cards
// ───────────────────────────────────────────
// │ Revenus  │ Marge % │ Clients │ Orders │ AOV │
// ───────────────────────────────────────────</span>

<span class="code-comment">// 1. Mesures principales</span>
<span class="code-keyword">Total Revenue</span> = <span class="code-function">SUM</span>(<span class="code-string">Sales[Amount]</span>)
<span class="code-keyword">Total Cost</span> = <span class="code-function">SUM</span>(<span class="code-string">Sales[Cost]</span>)

<span class="code-keyword">Margin %</span> = 
<span class="code-keyword">VAR</span> _Revenue = [<span class="code-string">Total Revenue</span>]
<span class="code-keyword">VAR</span> _Cost = [<span class="code-string">Total Cost</span>]
<span class="code-keyword">RETURN</span>
    <span class="code-function">DIVIDE</span>(_Revenue - _Cost, _Revenue, <span class="code-string">0</span>)

<span class="code-keyword">Customer Count</span> = <span class="code-function">DISTINCTCOUNT</span>(<span class="code-string">Sales[CustomerID]</span>)
<span class="code-keyword">Order Count</span> = <span class="code-function">COUNTROWS</span>(<span class="code-string">Sales</span>)

<span class="code-keyword">Average Order Value</span> = 
<span class="code-function">DIVIDE</span>(
    [<span class="code-string">Total Revenue</span>],
    [<span class="code-string">Order Count</span>],
    <span class="code-string">0</span>
)

<span class="code-comment">// 2. Comparaisons (pour chaque métrique)</span>
<span class="code-keyword">Revenue LY</span> = 
<span class="code-function">CALCULATE</span>(
    [<span class="code-string">Total Revenue</span>],
    <span class="code-function">SAMEPERIODLASTYEAR</span>(Calendar[<span class="code-string">Date</span>])
)

<span class="code-keyword">Revenue YoY %</span> = 
<span class="code-function">DIVIDE</span>(
    [<span class="code-string">Total Revenue</span>] - [<span class="code-string">Revenue LY</span>],
    [<span class="code-string">Revenue LY</span>],
    <span class="code-string">0</span>
)

<span class="code-comment">// (Répéter pour Margin %, Customer Count, etc.)</span>

<span class="code-comment">// 3. Mesures d'affichage pour Cards</span>
<span class="code-keyword">Revenue Display</span> = 
[<span class="code-string">Total Revenue</span>] & 
<span class="code-function">UNICHAR</span>(<span class="code-string">10</span>) &                        <span class="code-comment">// Saut de ligne</span>
<span class="code-function">IF</span>(
    [<span class="code-string">Revenue YoY %</span>] > <span class="code-string">0</span>,
    <span class="code-string">"↑ "</span>,
    <span class="code-string">"↓ "</span>
) &
<span class="code-function">FORMAT</span>(<span class="code-function">ABS</span>([<span class="code-string">Revenue YoY %</span>]), <span class="code-string">"0.0%"</span>) &
<span class="code-string">" YoY"</span>

<span class="code-comment">// 4. Conditional Formatting (pour background de Card)</span>
<span class="code-keyword">Revenue Status Color</span> = 
<span class="code-function">IF</span>(
    [<span class="code-string">Revenue YoY %</span>] >= <span class="code-string">0.1</span>,  <span class="code-comment">// +10% = Excellent</span>
    <span class="code-string">"#10b981"</span>,                 <span class="code-comment">// Vert</span>
    <span class="code-function">IF</span>(
        [<span class="code-string">Revenue YoY %</span>] >= <span class="code-string">0</span>,   <span class="code-comment">// Positif = OK</span>
        <span class="code-string">"#f59e0b"</span>,             <span class="code-comment">// Orange</span>
        <span class="code-string">"#ef4444"</span>              <span class="code-comment">// Rouge</span>
    )
)
                    </div>
                    
                    <div class="info-box info-box-tip">
                        <strong>💡 Configuration des Cards :</strong>
                        <ol style="margin-left: 1.5rem; margin-top: 0.5rem;">
                            <li>Créer 5 Cards côte à côte</li>
                            <li>Utiliser mesures Display pour afficher valeur + croissance</li>
                            <li>Conditional Formatting > Background color > Field value > [Status Color]</li>
                            <li>Ajuster tailles pour équilibre visuel</li>
                            <li>Grouper les 5 cards pour mouvement synchronisé</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- SECTION VOIR AUSSI -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">🔗</span>
                <h2 class="section-title">Voir Aussi</h2>
            </div>
            
            <div class="options-grid">
                <a href="tables-matrix.html" class="option-card" style="text-decoration: none; color: inherit;">
                    <div class="option-name">📋 Tables & Matrix</div>
                    <div class="option-description">Ajouter conditional formatting pour KPI dans tables</div>
                </a>
                
                <a href="best-practices-dashboards.html" class="option-card" style="text-decoration: none; color: inherit;">
                    <div class="option-name">💡 Best Practices Dashboards</div>
                    <div class="option-description">Comment structurer la zone KPI de votre dashboard</div>
                </a>
                
                <a href="dax-library.html" class="option-card" style="text-decoration: none; color: inherit;">
                    <div class="option-name">💻 Bibliothèque DAX</div>
                    <div class="option-description">Plus de mesures Time Intelligence</div>
                </a>
            </div>
        </section>
    </div>
    
    <footer class="page-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4>📚 Documentation</h4>
                <ul class="footer-links">
                    <li><a href="index.html">Accueil</a></li>
                    <li><a href="quick-reference.html">Quick Reference</a></li>
                    <li><a href="glossaire.html">Glossaire</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>🎓 Par Niveau</h4>
                <ul class="footer-links">
                    <li><a href="beginner-path.html">🟢 Débutant</a></li>
                    <li><a href="intermediate-path.html">🟡 Intermédiaire</a></li>
                    <li><a href="expert-path.html">🔴 Expert</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4>📊 Visuels</h4>
                <ul class="footer-links">
                    <li><a href="tables-matrix.html">Tables & Matrix</a></li>
                    <li><a href="advanced-visuals.html">Visuels Avancés</a></li>
                </ul>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #475569;">
            <p style="color: #94a3b8;">Dernière mise à jour : Janvier 2025 • Licence MIT • Fait avec ❤️ pour la communauté Power BI</p>
        </div>
    </footer>
</body>
</html>
